(self.webpackChunkmk_ui_frontend=self.webpackChunkmk_ui_frontend||[]).push([[201],{37678:(e,t,n)=>{"use strict";n.d(t,{L:()=>K});var a,r=n(70655),i=n(15691),l=n.n(i),c=n(5977),o=n(17751),s=n(91995),u=n(55459),m=function(e){var t=e.createStreamsInstance,n=e.setCreateStreamsInstance,a=(e.mainToggle,(0,o.useTranslation)().t);return l().createElement(l().Fragment,null,l().createElement(s.EmptyState,null,l().createElement(s.EmptyStateIcon,{icon:u.PlusCircleIcon}),l().createElement(s.Title,{headingLevel:"h4",size:"lg"},a("You don't have any Streams instances yet")),l().createElement(s.EmptyStateBody,null,a("Create a Streams instance to get started")),l().createElement(s.Button,{variant:"primary",onClick:function(){return n(!t)}},a("Create a Streams Instance"))))},d=n(42953),p=n(8575),f=n(69104),E=n.n(f),h="http://localhost:8000".replace(/\/+$/,""),v=function(e,t,n){void 0===t&&(t=h),void 0===n&&(n=E()),this.basePath=t,this.axios=n,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)},g=function(e){function t(t,n){var a=e.call(this,n)||this;return a.field=t,a.name="RequiredError",a}return(0,r.ZT)(t,e),t}(Error),T=function(e){var t=this;return{createKafka:function(n,a,i){return void 0===i&&(i={}),(0,r.mG)(t,void 0,Promise,(function(){var t,l,c,o,s,u,m,d;return(0,r.Jh)(this,(function(f){if(null==n)throw new g("async","Required parameter async was null or undefined when calling createKafka.");if(null==a)throw new g("kafkaRequest","Required parameter kafkaRequest was null or undefined when calling createKafka.");return"/api/managed-services-api/v1/kafkas",t=p.Qc("/api/managed-services-api/v1/kafkas",!0),e&&(l=e.baseOptions),c=(0,r.pi)((0,r.pi)({method:"POST"},l),i),o={},s={},e&&e.accessToken&&(u="function"==typeof e.accessToken?e.accessToken():e.accessToken,o.Authorization="Bearer "+u),void 0!==n&&(s.async=n),o["Content-Type"]="application/json",t.query=(0,r.pi)((0,r.pi)((0,r.pi)({},t.query),s),i.query),delete t.search,m=l&&l.headers?l.headers:{},c.headers=(0,r.pi)((0,r.pi)((0,r.pi)({},o),m),i.headers),d="string"!=typeof a||"application/json"===c.headers["Content-Type"],c.data=d?JSON.stringify(void 0!==a?a:{}):a||"",[2,{url:p.WU(t),options:c}]}))}))},createServiceAccount:function(n){return void 0===n&&(n={}),(0,r.mG)(t,void 0,Promise,(function(){var t,a,i,l,c,o,s;return(0,r.Jh)(this,(function(u){return"/api/managed-services-api/v1/serviceAccount",t=p.Qc("/api/managed-services-api/v1/serviceAccount",!0),e&&(a=e.baseOptions),i=(0,r.pi)((0,r.pi)({method:"GET"},a),n),l={},c={},e&&e.accessToken&&(o="function"==typeof e.accessToken?e.accessToken():e.accessToken,l.Authorization="Bearer "+o),t.query=(0,r.pi)((0,r.pi)((0,r.pi)({},t.query),c),n.query),delete t.search,s=a&&a.headers?a.headers:{},i.headers=(0,r.pi)((0,r.pi)((0,r.pi)({},l),s),n.headers),[2,{url:p.WU(t),options:i}]}))}))},deleteKafkaById:function(n,a){return void 0===a&&(a={}),(0,r.mG)(t,void 0,Promise,(function(){var t,i,l,c,o,s,u,m;return(0,r.Jh)(this,(function(d){if(null==n)throw new g("id","Required parameter id was null or undefined when calling deleteKafkaById.");return t="/api/managed-services-api/v1/kafkas/{id}".replace("{id}",encodeURIComponent(String(n))),i=p.Qc(t,!0),e&&(l=e.baseOptions),c=(0,r.pi)((0,r.pi)({method:"DELETE"},l),a),o={},s={},e&&e.accessToken&&(u="function"==typeof e.accessToken?e.accessToken():e.accessToken,o.Authorization="Bearer "+u),i.query=(0,r.pi)((0,r.pi)((0,r.pi)({},i.query),s),a.query),delete i.search,m=l&&l.headers?l.headers:{},c.headers=(0,r.pi)((0,r.pi)((0,r.pi)({},o),m),a.headers),[2,{url:p.WU(i),options:c}]}))}))},getKafkaById:function(n,a){return void 0===a&&(a={}),(0,r.mG)(t,void 0,Promise,(function(){var t,i,l,c,o,s,u,m;return(0,r.Jh)(this,(function(d){if(null==n)throw new g("id","Required parameter id was null or undefined when calling getKafkaById.");return t="/api/managed-services-api/v1/kafkas/{id}".replace("{id}",encodeURIComponent(String(n))),i=p.Qc(t,!0),e&&(l=e.baseOptions),c=(0,r.pi)((0,r.pi)({method:"GET"},l),a),o={},s={},e&&e.accessToken&&(u="function"==typeof e.accessToken?e.accessToken():e.accessToken,o.Authorization="Bearer "+u),i.query=(0,r.pi)((0,r.pi)((0,r.pi)({},i.query),s),a.query),delete i.search,m=l&&l.headers?l.headers:{},c.headers=(0,r.pi)((0,r.pi)((0,r.pi)({},o),m),a.headers),[2,{url:p.WU(i),options:c}]}))}))},listKafkas:function(n,a,i){return void 0===i&&(i={}),(0,r.mG)(t,void 0,Promise,(function(){var t,l,c,o,s,u,m;return(0,r.Jh)(this,(function(d){return"/api/managed-services-api/v1/kafkas",t=p.Qc("/api/managed-services-api/v1/kafkas",!0),e&&(l=e.baseOptions),c=(0,r.pi)((0,r.pi)({method:"GET"},l),i),o={},s={},e&&e.accessToken&&(u="function"==typeof e.accessToken?e.accessToken():e.accessToken,o.Authorization="Bearer "+u),void 0!==n&&(s.page=n),void 0!==a&&(s.size=a),t.query=(0,r.pi)((0,r.pi)((0,r.pi)({},t.query),s),i.query),delete t.search,m=l&&l.headers?l.headers:{},c.headers=(0,r.pi)((0,r.pi)((0,r.pi)({},o),m),i.headers),[2,{url:p.WU(t),options:c}]}))}))}}},S=function(e){return{createKafka:function(t,n,a){return(0,r.mG)(this,void 0,Promise,(function(){var i;return(0,r.Jh)(this,(function(l){switch(l.label){case 0:return[4,T(e).createKafka(t,n,a)];case 1:return i=l.sent(),[2,function(e,t){void 0===e&&(e=E()),void 0===t&&(t=h);var n=(0,r.pi)((0,r.pi)({},i.options),{url:t+i.url});return e.request(n)}]}}))}))},createServiceAccount:function(t){return(0,r.mG)(this,void 0,Promise,(function(){var n;return(0,r.Jh)(this,(function(a){switch(a.label){case 0:return[4,T(e).createServiceAccount(t)];case 1:return n=a.sent(),[2,function(e,t){void 0===e&&(e=E()),void 0===t&&(t=h);var a=(0,r.pi)((0,r.pi)({},n.options),{url:t+n.url});return e.request(a)}]}}))}))},deleteKafkaById:function(t,n){return(0,r.mG)(this,void 0,Promise,(function(){var a;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return[4,T(e).deleteKafkaById(t,n)];case 1:return a=i.sent(),[2,function(e,t){void 0===e&&(e=E()),void 0===t&&(t=h);var n=(0,r.pi)((0,r.pi)({},a.options),{url:t+a.url});return e.request(n)}]}}))}))},getKafkaById:function(t,n){return(0,r.mG)(this,void 0,Promise,(function(){var a;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return[4,T(e).getKafkaById(t,n)];case 1:return a=i.sent(),[2,function(e,t){void 0===e&&(e=E()),void 0===t&&(t=h);var n=(0,r.pi)((0,r.pi)({},a.options),{url:t+a.url});return e.request(n)}]}}))}))},listKafkas:function(t,n,a){return(0,r.mG)(this,void 0,Promise,(function(){var i;return(0,r.Jh)(this,(function(l){switch(l.label){case 0:return[4,T(e).listKafkas(t,n,a)];case 1:return i=l.sent(),[2,function(e,t){void 0===e&&(e=E()),void 0===t&&(t=h);var n=(0,r.pi)((0,r.pi)({},i.options),{url:t+i.url});return e.request(n)}]}}))}))}}},C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.prototype.createKafka=function(e,t,n){var a=this;return S(this.configuration).createKafka(e,t,n).then((function(e){return e(a.axios,a.basePath)}))},t.prototype.createServiceAccount=function(e){var t=this;return S(this.configuration).createServiceAccount(e).then((function(e){return e(t.axios,t.basePath)}))},t.prototype.deleteKafkaById=function(e,t){var n=this;return S(this.configuration).deleteKafkaById(e,t).then((function(e){return e(n.axios,n.basePath)}))},t.prototype.getKafkaById=function(e,t){var n=this;return S(this.configuration).getKafkaById(e,t).then((function(e){return e(n.axios,n.basePath)}))},t.prototype.listKafkas=function(e,t,n){var a=this;return S(this.configuration).listKafkas(e,t,n).then((function(e){return e(a.axios,a.basePath)}))},t}(v);!function(e){e.COMPLETED="complete",e.ACCEPTED="accepted",e.PROVISIONING="provisioning",e.FAILED="failed"}(a||(a={}));var b=n(52648),I=(n(82519),function(e){var t=e.status,n=t===a.ACCEPTED?"pending case":t;return l().createElement(s.Flex,null,l().createElement(s.FlexItem,{spacer:{default:"spacerSm"}},function(){switch(null==t?void 0:t.toLowerCase()){case a.COMPLETED:return l().createElement(u.CheckCircleIcon,{className:"check-circle-icon-color"});case a.FAILED:return l().createElement(u.ExclamationCircleIcon,{className:"exclamation-circle-icon-color"});case a.PROVISIONING:return l().createElement(s.Spinner,{size:u.IconSize.md});case a.ACCEPTED:default:return l().createElement(u.PendingIcon,null)}}()),l().createElement(s.FlexItem,null,(0,b.kC)(n)))}),k="https://api.stage.openshift.com",y=(function(){function e(){this.apiService=new C}e.getInstance=function(){return void 0===e.singleton&&(e.singleton=new e),e.singleton}}(),function(e){var t=e.confirmActionLabel,n=e.cancelActionLabel,r=e.title,c=e.onConfirm,u=e.selectedInstanceName,m=e.isModalOpen,d=e.setIsModalOpen,p=e.description,f=e.variant,E=void 0===f?s.ModalVariant.small:f,h=e.titleIconVariant,v=void 0===h?"warning":h,g=e.instanceStatus,T=(0,o.useTranslation)().t,S=(0,i.useState)(),C=S[0],b=S[1],I=function(){d(!m)};return l().createElement(s.Modal,{id:"dialog-prompt-modal",variant:E,isOpen:m,"aria-label":T("delete_instance_modal"),title:r,titleIconVariant:v,showClose:!0,onClose:I,actions:[l().createElement(s.Button,{key:"confirm-button",variant:s.ButtonVariant.danger,onClick:c,isDisabled:g===a.COMPLETED&&(null==C?void 0:C.toLocaleLowerCase())!==(null==u?void 0:u.toLowerCase())},t||T("confirm")),l().createElement(s.Button,{key:"cancel",variant:"link",onClick:I},n||T("cancel"))]},l().createElement(s.Text,{dangerouslySetInnerHTML:{__html:p||""}}),g===a.COMPLETED&&l().createElement(l().Fragment,null,l().createElement(s.TextContent,{className:"text-content"},l().createElement(s.Text,{dangerouslySetInnerHTML:{__html:T("instance_name_label",{name:u})}})),l().createElement(s.TextInput,{id:"instance-name",type:"text",value:C,onChange:function(e){b(e)}})))}),x=function(e){var t=e.page,n=e.perPage,a=e.itemCount,r=e.variant,o=e.isCompact,u=(0,c.k6)(),m=(0,c.TH)(),d=new URLSearchParams(m.search),p=(0,i.useCallback)((function(e,t){d.set(e,t.toString())}),[d]),f=(0,i.useCallback)((function(e,t){p("page",t.toString()),u.push({search:d.toString()})}),[p,u,d]),E=(0,i.useCallback)((function(e,t){p("page","1"),p("perPage",t.toString()),u.push({search:d.toString()})}),[p,u,d]);return a&&a>0?l().createElement(s.Pagination,{itemCount:a,perPage:n,page:t,onSetPage:f,variant:r||"top",onPerPageSelect:E,isCompact:o}):null},w=n(94956),_=function(e){var t=e.createStreamsInstance,n=e.setCreateStreamsInstance,a=e.filterSelected,c=e.namesSelected,o=e.setNamesSelected,m=e.mainToggle,d=e.total,p=e.page,f=e.perPage,E=(0,i.useState)(!1),h=E[0],v=E[1],g=(0,i.useState)(),T=g[0],S=g[1],C=l().createElement(l().Fragment,null,l().createElement(s.ToolbarGroup,{variant:"filter-group"},l().createElement(s.ToolbarFilter,{chips:c,deleteChip:function(e,t){if("name"===e.toString().toLowerCase()){var n=c.findIndex((function(e){return e===t.toString().toLowerCase()}));if(n>=0){var a=Object.assign([],c);a.splice(n,1),o(a)}}},deleteChipGroup:function(e){"name"===e.toString().toLowerCase()&&o([])},categoryName:"Name"},l().createElement(s.Select,{variant:s.SelectVariant.single,"aria-label":"Select filter",onToggle:function(){v(!h)},selections:a,isOpen:h},[{value:"Name",disabled:!1}].map((function(e,t){return l().createElement(s.SelectOption,{isDisabled:e.disabled,key:t,value:e.value})}))),l().createElement(s.InputGroup,{className:"filter-text-input"},l().createElement(s.TextInput,{name:"filter text input",id:"filterText",type:"search","aria-label":"Search filter input",placeholder:"Filter by "+(null==a?void 0:a.toLowerCase()),onChange:function(e){S(e)},value:T}),l().createElement(s.Button,{variant:s.ButtonVariant.control,onClick:function(){T&&""!==T.trim()&&(c.findIndex((function(e){return e===T.trim().toLowerCase()}))<0&&(o((0,r.pr)(c,[T.trim()])),S("")))},"aria-label":"Search instances"},l().createElement(u.SearchIcon,null))))));return l().createElement(s.Toolbar,{id:"instance-toolbar",collapseListedFiltersBreakpoint:"md",clearAllFilters:function(){o([])}},l().createElement(s.ToolbarContent,null,m&&l().createElement(s.ToolbarToggleGroup,{toggleIcon:l().createElement(u.FilterIcon,null),breakpoint:"md"},C),l().createElement(s.ToolbarItem,null,l().createElement(s.Button,{variant:"primary",onClick:function(){return n(!t)}},"Create Streams instance")),l().createElement(s.ToolbarItem,{variant:"pagination",alignment:{default:"alignRight"}},l().createElement(x,{itemCount:d,page:p,perPage:f,isCompact:!0}))))},N=n(42603),P=function(e){var t=e.mainToggle,n=e.kafkaInstanceItems,c=e.onViewInstance,u=e.onConnectToInstance,m=e.refresh,p=e.createStreamsInstance,f=e.setCreateStreamsInstance,E=e.page,h=e.perPage,v=e.total,g=(0,i.useContext)(N.V).token,T=(0,o.useTranslation)().t,S=new C({accessToken:g,basePath:k}),P=(0,w.Z7)().addAlert,F=(0,i.useState)(!1),A=F[0],L=F[1],D=(0,i.useState)({}),G=D[0],R=D[1],V=[T("name"),T("cloud_provider"),T("region"),T("status")],B=(0,i.useState)("Name"),O=B[0],K=(B[1],(0,i.useState)([])),q=K[0],z=K[1];(0,i.useEffect)((function(){m()}),[E,h]);var J,M=function(e,n){var r=e.originalData,i=function(e,t){switch(t){case a.COMPLETED:return e("delete_instance");case a.FAILED:return e("remove");case a.ACCEPTED:case a.PROVISIONING:return e("stop_instance");default:return}}(T,null==r?void 0:r.status);return t?[{title:"View details",id:"view-instance",onClick:function(){return c(r)}},{title:T("connect_to_instance"),id:"connect-instance",onClick:function(){return u(r)}},{title:i,id:"delete-instance",onClick:function(){return n(r)}}]:[{title:"View details",id:"view-instance",onClick:function(){return c(r)}},{title:i,id:"delete-instance",onClick:function(){return n(r)}}]},U=function(e){var t=e.status;R(e),t===a.FAILED?H(e):L(!A)},H=function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t,n;return(0,r.Jh)(this,(function(a){switch(a.label){case 0:if(void 0===(t=(null==G?void 0:G.id)||(null==e?void 0:e.id)))throw new Error("kafka instance id is not set");a.label=1;case 1:return a.trys.push([1,3,,4]),[4,S.deleteKafkaById(t).then((function(e){L(!1),P(T("kafka_successfully_deleted"),s.AlertVariant.success),m()}))];case 2:return a.sent(),[3,4];case 3:return n=a.sent(),L(!1),console.log("IS THERE AN ERROR HERE"),P(n,s.AlertVariant.danger),[3,4];case 4:return[2]}}))}))},W=function(e,t,n){var r={title:"",confirmActionLabel:"",description:""};return t===a.COMPLETED?(r.title=e("delete_instance")+"?",r.confirmActionLabel=e("delete_instance"),r.description=e("delete_instance_status_complete",{instanceName:n})):t!==a.ACCEPTED&&t!==a.PROVISIONING||(r.title=e("stop_creating_instance")+"?",r.confirmActionLabel=e("stop_creating_instance"),r.description=e("delete_instance_status_accepted_or_provisioning",{instanceName:n})),r}(T,null==G?void 0:G.status,null==G?void 0:G.name),j=W.title,Q=W.confirmActionLabel,Z=W.description;return l().createElement(s.Card,null,l().createElement(_,{mainToggle:t,createStreamsInstance:p,setCreateStreamsInstance:f,filterSelected:O,namesSelected:q,setNamesSelected:z,total:v,page:E,perPage:h}),l().createElement(d.Table,{cells:V,rows:(J=[],n.forEach((function(e){var t=e.name,n=e.cloud_provider,a=e.region,r=e.status,i=(0,b.Or)(n),c=(0,b.KD)(a);J.push({cells:[t,i,c,{title:l().createElement(I,{status:r})}],originalData:e})})),J),"aria-label":T("cluster_instance_list"),actionResolver:function(e,t){return M(e,U)}},l().createElement(d.TableHeader,null),l().createElement(d.TableBody,null)),l().createElement(s.Divider,null),l().createElement(x,{widgetId:"pagination-options-menu-bottom",itemCount:v,variant:s.PaginationVariant.bottom,page:E,perPage:h}),A&&l().createElement(y,{title:j,isModalOpen:A,instanceStatus:null==G?void 0:G.status,setIsModalOpen:L,onConfirm:H,selectedInstanceName:null==G?void 0:G.name,description:Z,confirmActionLabel:Q}))},F=function(){this.cloud_provider="",this.multi_az=!1,this.region="",this.name=""},A=function(e){var t=e.createStreamsInstance,n=e.setCreateStreamsInstance,a=e.refresh,c=(0,o.useTranslation)().t,m=new F;m.name="",m.cloud_provider="aws",m.region="us-east-1",m.multi_az=!0;var d=(0,r.pr)([{value:"",label:c("please_select"),disabled:!1}],b.Bh),p=(0,i.useState)(m),f=p[0],E=p[1],h=(0,i.useState)({fieldState:"default"}),v=h[0],g=h[1],T=(0,i.useState)({fieldState:"default"}),S=T[0],I=T[1],y=(0,i.useState)(!0),x=y[0],_=y[1],P=(0,i.useContext)(N.V).token,A=new C({accessToken:P,basePath:k}),L=(0,w.Z7)().addAlert,D=function(){n(!t)},G=function(e){switch(e.toLowerCase()){case"aws":return l().createElement(u.AwsIcon,{size:"lg",color:"black",className:"cloud-region-icon"});default:return}};return l().createElement(l().Fragment,null,l().createElement(s.Modal,{variant:s.ModalVariant.medium,title:c("create_a_streams_instance"),isOpen:t,onClose:D,actions:[l().createElement(s.Button,{key:"create",variant:"primary",onClick:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:if(e=!0,void 0!==f.name&&""!==f.name.trim()||(e=!1,g({fieldState:"error",message:c("this_is_a_required_field")})),void 0!==f.region&&""!==f.region.trim()||(e=!1,I({fieldState:"error",message:c("this_is_a_required_field")})),!e)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,A.createKafka(!0,f).then((function(e){L(c("kafka_successfully_created"),s.AlertVariant.success),D(),a()}))];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),L(t,s.AlertVariant.danger),[3,4];case 4:return[3,6];case 5:_(!1),n.label=6;case 6:return[2]}}))}))},isDisabled:!x},c("create_instance")),l().createElement(s.Button,{key:"cancel",variant:"link",onClick:D},c("cancel"))]},l().createElement(s.Form,null,!x&&l().createElement(s.FormAlert,null,l().createElement(s.Alert,{variant:"danger",title:c("create_instance_invalid_alert"),"aria-live":"polite",isInline:!0})),l().createElement(s.FormGroup,{label:c("instance_name"),helperTextInvalid:v.message,helperTextInvalidIcon:l().createElement(u.ExclamationCircleIcon,null),isRequired:!0,validated:v.fieldState,fieldId:"form-instance-name"},l().createElement(s.TextInput,{isRequired:!0,validated:v.fieldState,type:"text",id:"form-instance-name",name:"instance-name",value:null==f?void 0:f.name,onChange:function(e){E((0,r.pi)((0,r.pi)({},f),{name:e||""})),"error"===v.fieldState&&"error"!==S.fieldState&&_(!0),"error"===v.fieldState&&g({fieldState:"default",message:""})}})),l().createElement(s.FormGroup,{label:c("cloud_provider"),fieldId:"form-cloud-provider-name"},b.bv.map((function(e){return l().createElement(s.Tile,{key:"tile-"+e.value,title:c(e.label),icon:G(e.value),isSelected:f.cloud_provider===e.value,onClick:function(){return E((0,r.pi)((0,r.pi)({},f),{cloud_provider:e.value}))}})}))),l().createElement(s.FormGroup,{label:c("cloud_region"),helperTextInvalid:S.message,helperTextInvalidIcon:l().createElement(u.ExclamationCircleIcon,null),validated:S.fieldState,fieldId:"form-cloud-region-option"},l().createElement(s.FormSelect,{validated:S.fieldState,value:f.region,onChange:function(e){"error"===S.fieldState&&"error"!==v.fieldState&&_(!0),"error"===S.fieldState&&I({fieldState:"default",message:""}),E((0,r.pi)((0,r.pi)({},f),{region:e}))},id:"cloud-region-select",name:"cloud-region","aria-label":c("cloud_region")},d.map((function(e,t){return l().createElement(s.FormSelectOption,{key:t,value:e.value,label:e.label})})))),l().createElement(s.FormGroup,{label:c("availabilty_zones"),fieldId:"availability-zones"},l().createElement(s.ToggleGroup,{"aria-label":c("availability_zone_selection")},l().createElement(s.ToggleGroupItem,{text:c("single"),buttonId:"single",isDisabled:!0,isSelected:!1===f.multi_az}),l().createElement(s.ToggleGroupItem,{text:c("multi"),buttonId:"multi",isSelected:!0===f.multi_az})))),l().createElement("br",null),l().createElement("br",null)))},L=function(){var e=(0,i.useState)(!1),t=e[0],n=e[1],a=(0,i.useState)(!1),r=a[0],c=a[1],o=(0,i.useState)(1),m=o[0],d=o[1],p=(0,i.useState)(),f=p[0],E=p[1],h=(0,i.useState)(!1),v=h[0],g=h[1],T=(0,i.useState)(!1),S=T[0],C=T[1],b=(0,i.useState)(!1),I=b[0],k=b[1],y=(0,i.useState)(!1),x=y[0],w=y[1],_=(0,i.useState)(!1),N=_[0],P=_[1],F=(0,i.useState)("name"),A=F[0],L=F[1],D=(0,i.useState)(),G=D[0],R=D[1],V=(0,i.useState)(!1),B=V[0],O=V[1],K=(0,i.useState)("name"),q=K[0],z=K[1],J=(0,i.useState)(),M=J[0],U=J[1],H=(0,i.useState)(!1),W=H[0],j=H[1],Q=(0,i.useState)(!1),Z=Q[0],Y=Q[1],$=(0,i.useState)(!1),X=$[0],ee=$[1],te=(0,i.useState)("name"),ne=te[0],ae=te[1],re=(0,i.useState)(),ie=re[0],le=re[1],ce=(0,i.useState)(!1),oe=ce[0],se=ce[1],ue=function(){c(!r)},me=function(e,t){d(e.id)},de=function(e,t){g(!1),C(!1),k(!1),w(!1);var n=t.target,a="radio"===n.type?n.checked:n.value,r=n.name;"radio1-1"===r?g(a):"radio2-1"===r?C(a):"radio3-1"===r?k(a):"radio4-1"===r&&w(a)},pe=function(e,t){j(!1),Y(!1),ee(!1);var n=t.target,a="radio"===n.type?n.checked:n.value,r=n.name;"radio1-4"===r?j(a):"radio2-4"===r?Y(a):"radio3-4"===r&&ee(a)},fe=[{id:1,name:"Basic info",component:l().createElement("div",{className:"generate-cred-wizard-content"},l().createElement(s.TextContent,{className:"pf-u-mb-lg"},l().createElement(s.Text,{component:s.TextVariants.h2},"Basic info"),l().createElement(s.Text,{component:s.TextVariants.small},"To connect securely to Red Hat OpenShift Streams for Apache Kafka, your application or tool needs an API key with permission to access the Kafka instance and resources such as topics.")),l().createElement(s.Form,null,l().createElement(s.FormGroup,{label:"Give the credential a name",fieldId:"simple-form-name",isRequired:!0},l().createElement(s.TextInput,{isRequired:!0,type:"text",id:"simple-form-name",name:"simple-form-name","aria-describedby":"simple-form-name-helper",value:f,onChange:function(e){E(e)},placeholder:"Enter your credential name"})),l().createElement(s.FormGroup,{label:"What do you want your application to do?",className:"form-group-radio",fieldId:"radio-access-type",isRequired:!0},l().createElement(s.Radio,{isChecked:v,name:"radio1-1",onChange:de,label:"Produce only",id:"radio-controlled-1",value:"produce"}),l().createElement(s.Radio,{isChecked:S,name:"radio2-1",onChange:de,label:"Consume only",id:"radio-controlled-2",value:"consume"}),l().createElement(s.Radio,{isChecked:I,name:"radio3-1",onChange:de,label:"Produce and consume",id:"radio-controlled-3",value:"produceconsume"}),l().createElement(s.Radio,{isChecked:x,name:"radio4-1",onChange:de,label:"Produce, consume and create topics",id:"radio-controlled-4",value:"produceconsumecreate"}))))},{id:2,name:"Topics access",component:l().createElement("div",{className:"generate-cred-wizard-content"},l().createElement(s.TextContent,{className:"pf-u-mb-lg"},l().createElement(s.Text,{component:s.TextVariants.h2},"Choose which topics the credential can access")),l().createElement(s.Form,null,l().createElement(s.Switch,{id:"simple-switch",label:"All topics",labelOff:"All topics",isChecked:N,onChange:function(e){P(e)}}),N?l().createElement(l().Fragment,null):l().createElement(s.FormGroup,{label:"Specific topics",fieldId:"input-access-topics",isRequired:!0},l().createElement(s.Split,{hasGutter:!0,className:"pf-u-align-items-center"},l().createElement(s.SplitItem,null,"Topics with the"),l().createElement(s.SplitItem,null,l().createElement(s.FormSelect,{id:"select-access-topics",value:A,onChange:function(e){L(e)}},l().createElement(s.FormSelectOption,{value:"name",label:"name"}),l().createElement(s.FormSelectOption,{value:"prefix",label:"prefix"}))),l().createElement(s.SplitItem,{isFilled:!0},l().createElement(s.TextInput,{isRequired:!0,type:"text",id:"input-access-topics",name:"input-access-topics","aria-describedby":"simple-form-name-helper",value:G,onChange:function(e){R(e)},placeholder:"Enter your topic "+A}))),l().createElement(s.Popover,{position:"bottom",bodyContent:l().createElement("div",null,"This control is not functional for this prototype.")},l().createElement(s.Button,{variant:"link",icon:l().createElement(u.PlusCircleIcon,null),isInline:!0,className:"pf-u-mt-md"},"Add another rule")))))},{id:3,name:"Consumer groups access",component:l().createElement("div",{className:"generate-cred-wizard-content"},l().createElement(s.TextContent,{className:"pf-u-mb-lg"},l().createElement(s.Text,{component:s.TextVariants.h2},"Choose which consumer groups the credential can access")),l().createElement(s.Form,null,l().createElement(s.Switch,{id:"simple-switch",label:"All consumer groups",labelOff:"All consumer groups",isChecked:B,onChange:function(e){O(e)}}),B?l().createElement(l().Fragment,null):l().createElement(s.FormGroup,{label:"Specific consumer groups",fieldId:"input-access-consumers",isRequired:!0},l().createElement(s.Split,{hasGutter:!0,className:"pf-u-align-items-center"},l().createElement(s.SplitItem,null,"Groups with the"),l().createElement(s.SplitItem,null,l().createElement(s.FormSelect,{id:"select-access-consumers",value:q,onChange:function(e){z(e)}},l().createElement(s.FormSelectOption,{value:"name",label:"name"}),l().createElement(s.FormSelectOption,{value:"prefix",label:"prefix"}))),l().createElement(s.SplitItem,{isFilled:!0},l().createElement(s.TextInput,{isRequired:!0,type:"text",id:"input-access-consumers",name:"input-access-consumers",value:M,onChange:function(e){U(e)},placeholder:"Enter your consumer group "+q}))))))},{id:4,name:"Transaction IDs access",component:l().createElement("div",{className:"generate-cred-wizard-content"},l().createElement(s.TextContent,{className:"pf-u-mb-lg"},l().createElement(s.Text,{component:s.TextVariants.h2,id:"step4-title"},"Choose which transaction IDs the credential can access")),l().createElement(s.Form,null,l().createElement("section",{"aria-labelledby":"step4-title",className:"form-group-radio"},l().createElement("div",{className:"pf-c-form__group-control"},l().createElement(s.Radio,{isChecked:W,name:"radio1-4",onChange:pe,label:"No transaction IDs",id:"radio-controlled-1-4",value:"no"}),l().createElement(s.Radio,{isChecked:Z,name:"radio2-4",onChange:pe,label:"All transaction IDs",id:"radio-controlled-2-4",value:"all",className:"pf-u-mb-sm"}),l().createElement(s.Split,{hasGutter:!0,className:"pf-u-align-items-center"},l().createElement(s.SplitItem,null,l().createElement(s.Radio,{isChecked:X,name:"radio3-4",onChange:pe,label:"Transaction IDs with the",id:"radio-controlled-3-4",value:"filter"})),l().createElement(s.SplitItem,null,l().createElement(s.FormSelect,{id:"select-access-transactions",value:ne,onChange:function(e){ae(e)}},l().createElement(s.FormSelectOption,{value:"name",label:"name"}),l().createElement(s.FormSelectOption,{value:"prefix",label:"prefix"}))),l().createElement(s.SplitItem,{isFilled:!0},l().createElement(s.TextInput,{isRequired:!0,type:"text",id:"input-access-transactions",name:"input-access-transactions",value:ie,onChange:function(e){le(e)},placeholder:"Enter your transaction ID "+ne}))))))),nextButtonText:"Finish"},{id:5,name:"Finish",component:l().createElement(l().Fragment,null,l().createElement(s.EmptyState,{variant:s.EmptyStateVariant.large},l().createElement(s.EmptyStateIcon,{icon:u.KeyIcon}),l().createElement(s.Title,{headingLevel:"h4",size:"lg"},"Credential successfully generated"),l().createElement(s.EmptyStateBody,null,"Use this client ID to connect with the Kafka instance. Copy the client ID and secret and keep in a safe place. This is the only time the client ID and secret will display."),l().createElement(s.InputGroup,{className:"pf-u-mt-lg"},l().createElement(s.InputGroupText,{className:"no-wrap"},"Client ID"),l().createElement(s.ClipboardCopy,{isReadOnly:!0,className:"pf-u-w-100"},"FSLG934JM98IL")),l().createElement(s.InputGroup,{className:"pf-u-mt-md"},l().createElement(s.InputGroupText,{className:"no-wrap"},"Client secret"),l().createElement(s.ClipboardCopy,{isReadOnly:!0,className:"pf-u-w-100"},"898VsyDInUfhSd9ng8K/REs9r8h0n8j98s5c4JdeJfUg/E8")),l().createElement(s.Bullseye,{className:"pf-u-mt-lg"},l().createElement(s.Checkbox,{label:"I have copied the client ID and secret",isChecked:oe,onChange:function(e){se(e)},id:"check-1",name:"check1"})),l().createElement(s.Button,{variant:"primary",isDisabled:!oe,onClick:function(){c(!r),n(!t),d(1)}},"Close"))),isFinishedStep:!0}];return l().createElement(l().Fragment,null,t?l().createElement(l().Fragment,null,l().createElement(s.FlexItem,{className:"pf-m-align-right pf-m-spacer-none"},l().createElement(s.Button,{variant:"danger",onClick:ue,className:"pf-u-ml-md pf-u-mb-md"},"Generate new credential")),l().createElement(s.FlexItem,{className:"pf-m-grow"},l().createElement(s.Alert,{variant:"success",isInline:!0,title:"Credentials successfully generated"}))):l().createElement(s.FlexItem,{className:"pf-m-align-right"},l().createElement(s.Button,{variant:"secondary",onClick:ue,className:"pf-u-ml-md"},"Generate credential")),l().createElement(s.Wizard,{title:"Generate credential",description:"Generate credential for your application",steps:fe,onNext:me,onBack:me,onClose:ue,isOpen:r,hideClose:5===m}))},D=n(91031),G=n(88945),R=n.n(G),V=n(56176),B=n.n(V),O=function(e){var t=e.mainToggle,n=e.onClose,a=e.activeTab,r=e.instanceDetail,c=(0,i.useState)(0),o=c[0],m=c[1],d=(0,i.useState)(0),p=d[0],f=d[1];(0,i.useEffect)((function(){m("Details"===a?0:1)}),[a]);var E=l().createElement(l().Fragment,null,l().createElement("div",{className:"tab-content-body"},l().createElement(s.TextContent,{className:"pf-u-pb-sm"},l().createElement(s.Text,{component:s.TextVariants.small},"To connect an application or tool to this Kafka instance, you will need the address of a Kafka listener, and generated credentials."),l().createElement(s.Text,{component:s.TextVariants.h5},"Kafka listener and credentials"),l().createElement(s.Text,{component:s.TextVariants.small},"Your application or tool will make its initial connection to the Kafka instance using the bootstrap server, and authenticate with credentials specific to the server if required."),l().createElement(s.Text,{component:s.TextVariants.p,className:"pf-u-mt-md"},"External server")),l().createElement(s.Flex,null,l().createElement(s.FlexItem,{className:"pf-m-grow pf-m-spacer-none pf-u-mb-xs"},l().createElement(s.ClipboardCopy,null,"strimzi-external-bootstrap-01 : 1234")),l().createElement(L,null)),l().createElement(s.TextContent,{className:"pf-u-pb-sm pf-u-pt-lg"},l().createElement(s.Text,{component:s.TextVariants.h5},"Producer endpoint and credentials"),l().createElement(s.Text,{component:s.TextVariants.small},"Applications and tools that use the REST producer API will need the REST producer endpoint to connect.")),l().createElement(s.ClipboardCopy,null,"https : // : 30123"))),h=l().createElement(l().Fragment,null,l().createElement("div",{className:"tab-content-body"},l().createElement(s.TextContent,{className:"pf-u-pb-sm"},l().createElement(s.Text,{component:s.TextVariants.h5},"Sample connection code"),l().createElement(s.Text,{component:s.TextVariants.small},"Use this snippet of code to set the properties in your Kafka client to connect securely. Replace the values in <brackets>.")),l().createElement("div",{className:"pf-c-code-editor pf-m-read-only"},l().createElement("div",{className:"pf-c-code-editor__header"},l().createElement("div",{className:"pf-c-code-editor__controls"},l().createElement(s.Button,{variant:"control","aria-label":"Action"},l().createElement(u.CopyIcon,null))),l().createElement("div",{className:"pf-c-code-editor__tab"},l().createElement("span",{className:"pf-c-code-editor__tab-text"},"Java"))),l().createElement("div",{className:"pf-c-code-editor__main"},l().createElement("div",{className:"pf-c-code-editor__code"},l().createElement("pre",{className:"pf-c-code-editor__code-pre"},"import java.util.Properties;")))),l().createElement(s.TextContent,{className:"pf-u-pb-sm pf-u-pt-lg"},l().createElement(s.Text,{component:s.TextVariants.h5},"Sample connection code"),l().createElement(s.Text,{component:s.TextVariants.small},"Use this snippet of code to set the properties in your Kafka client to connect securely. Replace the values in <brackets>.")),l().createElement("div",{className:"pf-c-code-editor pf-m-read-only"},l().createElement("div",{className:"pf-c-code-editor__header"},l().createElement("div",{className:"pf-c-code-editor__controls"},l().createElement(s.Button,{variant:"control","aria-label":"Action"},l().createElement(u.CopyIcon,null)))),l().createElement("div",{className:"pf-c-code-editor__main"},l().createElement("div",{className:"pf-c-code-editor__code"},l().createElement("pre",{className:"pf-c-code-editor__code-pre"},"bootstrap.servers=es-1-4-0-ibm-es-proxy-route-bootstrap-es.apps.2019-4-1-demo-icp-mst.fyre.ibm.com:44 sasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required username=â€œtoken")))))),v=function(e,t){return l().createElement(l().Fragment,null,t&&l().createElement(l().Fragment,null,l().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},e),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},t)))},g=r||{},T=g.id,S=g.created_at,C=g.updated_at,b=g.owner;R().extend(B());var I=l().createElement(l().Fragment,null,l().createElement("div",{className:"tab-content-body"},t&&l().createElement(s.Grid,{className:"instance-card-grid"},l().createElement(s.GridItem,{span:6,className:"instance-detail-first-grid"},l().createElement(s.Card,{isFlat:!0},l().createElement(s.CardBody,null,l().createElement(s.TextContent,null,l().createElement(s.Text,{component:s.TextVariants.small,className:"pf-u-mb-0"},"Topics"),l().createElement(s.Text,{component:s.TextVariants.h3,className:"pf-u-mt-0"},"10"))))),l().createElement(s.GridItem,{span:6},l().createElement(s.Card,{isFlat:!0},l().createElement(s.CardBody,null,l().createElement(s.TextContent,null,l().createElement(s.Text,{component:s.TextVariants.small,className:"pf-u-mb-0"},"Consumer groups"),l().createElement(s.Text,{component:s.TextVariants.h3,className:"pf-u-mt-0"},"8")))))),l().createElement(s.TextContent,null,l().createElement(s.TextList,{component:s.TextListVariants.dl},v("Cloud Provider","Amazon Web Services"),v("Region","US East, N. Virginia"),v("ID",T),v("Owner",b),v("Created",R()(S).format("LLLL")),v("Updated",R()(C).format("LLLL")))))),k=l().createElement(l().Fragment,null,l().createElement("div",{className:"tab-content-body pf-m-secondary"},l().createElement(s.Tabs,{activeKey:p,isSecondary:!0,onSelect:function(e,t){f(t)}},l().createElement(s.Tab,{eventKey:0,title:l().createElement(s.TabTitleText,null,"Resources")},E),l().createElement(s.Tab,{eventKey:1,title:l().createElement(s.TabTitleText,null,"Sample code")},h))));return l().createElement(s.DrawerPanelContent,{className:"instance-drawer",widths:{default:"width_66"}},void 0===r?l().createElement(D.g,null):l().createElement(l().Fragment,null,l().createElement(s.DrawerHead,null,l().createElement(s.TextContent,null,l().createElement(s.Text,{component:s.TextVariants.small,className:"pf-u-mb-0"},"Instance Name"),l().createElement(s.Title,{headingLevel:"h3",size:s.TitleSizes["2xl"],className:"pf-u-mt-0 "},null==r?void 0:r.name)),l().createElement(s.DrawerActions,null,l().createElement(s.DrawerCloseButton,{onClick:n}))),l().createElement(s.DrawerPanelBody,null,l().createElement(s.Tabs,{activeKey:o,onSelect:function(e,t){m(t)}},l().createElement(s.Tab,{eventKey:0,title:l().createElement(s.TabTitleText,null,"Details")},I),t&&l().createElement(s.Tab,{eventKey:1,title:l().createElement(s.TabTitleText,null,"Connection")},k)))))},K=function(e){e.onConnectToInstance;var t=(0,i.useContext)(N.V).token,n=(0,c.TH)(),a=new URLSearchParams(n.search),u=parseInt(a.get("page")||"",10)||1,d=parseInt(a.get("perPage")||"",10)||10,p=new C({accessToken:t,basePath:k}),f=(0,o.useTranslation)().t,E=(0,i.useState)(!1),h=E[0],v=E[1],g=(0,i.useState)(),T=g[0],S=g[1],b=(0,i.useState)({}),I=b[0],y=b[1],x=(0,i.useState)(!1),_=x[0],F=x[1],L=(0,i.useState)(!1),G=L[0],R=L[1],V=(0,i.useState)(),B=V[0],K=V[1],q=l().createRef(),z=function(){return(0,r.mG)(void 0,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,p.listKafkas(null==u?void 0:u.toString(),null==d?void 0:d.toString()).then((function(e){var t=e.data;console.log("what is res"+JSON.stringify(t)),y(t),S(t.items)})).then((function(){return setTimeout(z,2e3)}))];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),console.log(e),[3,3];case 3:return[2]}}))}))};if((0,i.useEffect)((function(){void 0===t&&""===t||(F(!1),z().then((function(){return F(!0)})))}),[t]),!_||""===t||void 0===t)return l().createElement(D.g,null);return l().createElement(l().Fragment,null,l().createElement(w.uZ,null,l().createElement(s.Drawer,{isExpanded:null!=B,onExpand:function(){q.current&&q.current.focus()}},l().createElement(s.DrawerContent,{panelContent:l().createElement(O,{mainToggle:G,onClose:function(){K(null)},isExpanded:null!=B,drawerRef:q,activeTab:null==B?void 0:B.activeTab,instanceDetail:null==B?void 0:B.instanceDetail})},l().createElement(s.PageSection,{variant:s.PageSectionVariants.light},l().createElement(s.Level,null,l().createElement(s.LevelItem,null,l().createElement(s.Title,{headingLevel:"h1",size:"lg"},f("OpenshiftStreams"))),l().createElement(s.LevelItem,null,l().createElement(s.Switch,{id:"simple-switch",label:f("Mock UI"),labelOff:f("Currently supported UI"),isChecked:G,onChange:function(e){R(e)}})))),l().createElement(s.PageSection,null,T&&T.length>0?l().createElement(P,{kafkaInstanceItems:T,mainToggle:G,onConnectToInstance:function(e){K({instanceDetail:e,activeTab:"Connection"})},onViewInstance:function(e){K({instanceDetail:e,activeTab:"Details"})},refresh:z,createStreamsInstance:h,setCreateStreamsInstance:v,page:u,perPage:d,total:null==I?void 0:I.total}):void 0!==T&&l().createElement(m,{createStreamsInstance:h,setCreateStreamsInstance:v,mainToggle:G}),h&&l().createElement(A,{createStreamsInstance:h,setCreateStreamsInstance:v,mainToggle:G,refresh:z}))))))}},42603:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});var a=n(15691),r=n.n(a)().createContext({token:void 0})},62219:(e,t,n)=>{"use strict";n.d(t,{z:()=>l});var a=n(15691),r=n.n(a),i=n(91995);function l(e){var t=e.alerts,n=e.onCloseAlert;return r().createElement(i.AlertGroup,{isToast:!0},t.map((function(e){var t=e.key,a=e.variant,l=e.message;return r().createElement(i.Alert,{key:t,isLiveRegion:!0,variant:i.AlertVariant[a],variantLabel:"",title:l,actionClose:r().createElement(i.AlertActionCloseButton,{title:l,onClose:function(){return n(t)}})})})))}},91031:(e,t,n)=>{"use strict";n.d(t,{g:()=>c});var a=n(15691),r=n.n(a),i=n(91995),l=n(92992),c=function(){return r().createElement(i.PageSection,null,r().createElement(i.Bullseye,null,r().createElement(l.Spinner,null)))}}}]);
//# sourceMappingURL=201.db86cca698291109037e.js.map