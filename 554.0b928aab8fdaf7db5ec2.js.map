{"version":3,"sources":["webpack://mk-ui-frontend/./node_modules/i18next-http-backend/esm/getFetch.cjs","webpack://mk-ui-frontend/./node_modules/i18next-http-backend/esm/utils.js","webpack://mk-ui-frontend/./node_modules/i18next-http-backend/esm/request.js","webpack://mk-ui-frontend/./node_modules/i18next-http-backend/esm/index.js","webpack://mk-ui-frontend/./node_modules/i18next-http-backend/node_modules/node-fetch/browser.js"],"names":["fetchApi","fetch","g","window","document","f","default","exports","module","arr","each","forEach","slice","defaults","obj","call","arguments","source","prop","undefined","XmlHttpRequestApi","ActiveXObjectApi","_typeof","Symbol","iterator","constructor","prototype","global","XMLHttpRequest","ActiveXObject","addQueryString","url","params","queryString","paramName","encodeURIComponent","indexOf","options","payload","callback","queryStringParams","headers","customHeaders","method","body","stringify","requestOptions","then","response","ok","statusText","status","text","data","catch","requestWithFetch","x","open","crossDomain","setRequestHeader","withCredentials","overrideMimeType","h","i","onreadystatechange","readyState","responseText","send","e","console","log","requestWithXmlHttpRequest","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","getDefaults","loadPath","addPath","allowMultiLoading","parse","JSON","parsePayload","namespace","fallbackValue","value","_defineProperty","request","reloadInterval","mode","credentials","cache","Backend","services","allOptions","this","type","init","protoProps","staticProps","_this","setInterval","reload","languages","namespaces","interpolator","interpolate","lng","join","ns","loadUrl","language","_this2","err","res","message","ret","parseErr","_this3","_this4","_this$services","backendConnector","languageUtils","logger","currentLanguage","toLowerCase","toLoad","append","toResolveHierarchy","l","push","preload","read","warn","concat","loaded","self","Error","getGlobal","bind","Headers","Request","Response"],"mappings":"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","file":"554.0b928aab8fdaf7db5ec2.js","sourcesContent":["var fetchApi\nif (typeof fetch === 'function') {\n  if (typeof global !== 'undefined' && global.fetch) {\n    fetchApi = global.fetch\n  } else if (typeof window !== 'undefined' && window.fetch) {\n    fetchApi = window.fetch\n  }\n}\n\nif (typeof require !== 'undefined' && (typeof window === 'undefined' || typeof window.document === 'undefined')) {\n  var f = fetchApi || require('node-fetch')\n  if (f.default) f = f.default\n  exports.default = f\n  module.exports = exports.default\n}\n","var arr = [];\nvar each = arr.forEach;\nvar slice = arr.slice;\nexport function defaults(obj) {\n  each.call(slice.call(arguments, 1), function (source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { defaults } from './utils.js';\nimport * as fetchNode from './getFetch.cjs';\nvar fetchApi;\n\nif (typeof fetch === 'function') {\n  if (typeof global !== 'undefined' && global.fetch) {\n    fetchApi = global.fetch;\n  } else if (typeof window !== 'undefined' && window.fetch) {\n    fetchApi = window.fetch;\n  }\n}\n\nvar XmlHttpRequestApi;\n\nif (typeof XMLHttpRequest === 'function') {\n  if (typeof global !== 'undefined' && global.XMLHttpRequest) {\n    XmlHttpRequestApi = global.XMLHttpRequest;\n  } else if (typeof window !== 'undefined' && window.XMLHttpRequest) {\n    XmlHttpRequestApi = window.XMLHttpRequest;\n  }\n}\n\nvar ActiveXObjectApi;\n\nif (typeof ActiveXObject === 'function') {\n  if (typeof global !== 'undefined' && global.ActiveXObject) {\n    ActiveXObjectApi = global.ActiveXObject;\n  } else if (typeof window !== 'undefined' && window.ActiveXObject) {\n    ActiveXObjectApi = window.ActiveXObject;\n  }\n}\n\nif (!fetchApi && fetchNode && !XmlHttpRequestApi && !ActiveXObjectApi) fetchApi = fetchNode.default || fetchNode;\nif (typeof fetchApi !== 'function') fetchApi = undefined;\n\nvar addQueryString = function addQueryString(url, params) {\n  if (params && _typeof(params) === 'object') {\n    var queryString = '';\n\n    for (var paramName in params) {\n      queryString += '&' + encodeURIComponent(paramName) + '=' + encodeURIComponent(params[paramName]);\n    }\n\n    if (!queryString) return url;\n    url = url + (url.indexOf('?') !== -1 ? '&' : '?') + queryString.slice(1);\n  }\n\n  return url;\n};\n\nvar requestWithFetch = function requestWithFetch(options, url, payload, callback) {\n  if (options.queryStringParams) {\n    url = addQueryString(url, options.queryStringParams);\n  }\n\n  var headers = defaults({}, typeof options.customHeaders === 'function' ? options.customHeaders() : options.customHeaders);\n  if (payload) headers['Content-Type'] = 'application/json';\n  fetchApi(url, defaults({\n    method: payload ? 'POST' : 'GET',\n    body: payload ? options.stringify(payload) : undefined,\n    headers: headers\n  }, typeof options.requestOptions === 'function' ? options.requestOptions(payload) : options.requestOptions)).then(function (response) {\n    if (!response.ok) return callback(response.statusText || 'Error', {\n      status: response.status\n    });\n    response.text().then(function (data) {\n      callback(null, {\n        status: response.status,\n        data: data\n      });\n    }).catch(callback);\n  }).catch(callback);\n};\n\nvar requestWithXmlHttpRequest = function requestWithXmlHttpRequest(options, url, payload, callback) {\n  if (payload && _typeof(payload) === 'object') {\n    payload = addQueryString('', payload).slice(1);\n  }\n\n  if (options.queryStringParams) {\n    url = addQueryString(url, options.queryStringParams);\n  }\n\n  try {\n    var x;\n\n    if (XmlHttpRequestApi) {\n      x = new XmlHttpRequestApi();\n    } else {\n      x = new ActiveXObjectApi('MSXML2.XMLHTTP.3.0');\n    }\n\n    x.open(payload ? 'POST' : 'GET', url, 1);\n\n    if (!options.crossDomain) {\n      x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    }\n\n    x.withCredentials = !!options.withCredentials;\n\n    if (payload) {\n      x.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    }\n\n    if (x.overrideMimeType) {\n      x.overrideMimeType('application/json');\n    }\n\n    var h = options.customHeaders;\n    h = typeof h === 'function' ? h() : h;\n\n    if (h) {\n      for (var i in h) {\n        x.setRequestHeader(i, h[i]);\n      }\n    }\n\n    x.onreadystatechange = function () {\n      x.readyState > 3 && callback(x.status >= 400 ? x.statusText : null, {\n        status: x.status,\n        data: x.responseText\n      });\n    };\n\n    x.send(payload);\n  } catch (e) {\n    console && console.log(e);\n  }\n};\n\nvar request = function request(options, url, payload, callback) {\n  if (typeof payload === 'function') {\n    callback = payload;\n    payload = undefined;\n  }\n\n  callback = callback || function () {};\n\n  if (fetchApi) {\n    return requestWithFetch(options, url, payload, callback);\n  }\n\n  if (typeof XMLHttpRequest === 'function' || typeof ActiveXObject === 'function') {\n    return requestWithXmlHttpRequest(options, url, payload, callback);\n  }\n};\n\nexport default request;","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { defaults } from './utils.js';\nimport request from './request.js';\n\nvar getDefaults = function getDefaults() {\n  return {\n    loadPath: '/locales/{{lng}}/{{ns}}.json',\n    addPath: '/locales/add/{{lng}}/{{ns}}',\n    allowMultiLoading: false,\n    parse: function parse(data) {\n      return JSON.parse(data);\n    },\n    stringify: JSON.stringify,\n    parsePayload: function parsePayload(namespace, key, fallbackValue) {\n      return _defineProperty({}, key, fallbackValue || '');\n    },\n    request: request,\n    reloadInterval: typeof window !== 'undefined' ? false : 60 * 60 * 1000,\n    customHeaders: {},\n    queryStringParams: {},\n    crossDomain: false,\n    withCredentials: false,\n    overrideMimeType: false,\n    requestOptions: {\n      mode: 'cors',\n      credentials: 'same-origin',\n      cache: 'default'\n    }\n  };\n};\n\nvar Backend = function () {\n  function Backend(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var allOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, Backend);\n\n    this.services = services;\n    this.options = options;\n    this.allOptions = allOptions;\n    this.type = 'backend';\n    this.init(services, options, allOptions);\n  }\n\n  _createClass(Backend, [{\n    key: \"init\",\n    value: function init(services) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var allOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      this.services = services;\n      this.options = defaults(options, this.options || {}, getDefaults());\n      this.allOptions = allOptions;\n\n      if (this.options.reloadInterval) {\n        setInterval(function () {\n          return _this.reload();\n        }, this.options.reloadInterval);\n      }\n    }\n  }, {\n    key: \"readMulti\",\n    value: function readMulti(languages, namespaces, callback) {\n      var loadPath = this.options.loadPath;\n\n      if (typeof this.options.loadPath === 'function') {\n        loadPath = this.options.loadPath(languages, namespaces);\n      }\n\n      var url = this.services.interpolator.interpolate(loadPath, {\n        lng: languages.join('+'),\n        ns: namespaces.join('+')\n      });\n      this.loadUrl(url, callback, languages, namespaces);\n    }\n  }, {\n    key: \"read\",\n    value: function read(language, namespace, callback) {\n      var loadPath = this.options.loadPath;\n\n      if (typeof this.options.loadPath === 'function') {\n        loadPath = this.options.loadPath([language], [namespace]);\n      }\n\n      var url = this.services.interpolator.interpolate(loadPath, {\n        lng: language,\n        ns: namespace\n      });\n      this.loadUrl(url, callback, language, namespace);\n    }\n  }, {\n    key: \"loadUrl\",\n    value: function loadUrl(url, callback, languages, namespaces) {\n      var _this2 = this;\n\n      this.options.request(this.options, url, undefined, function (err, res) {\n        if (res && (res.status >= 500 && res.status < 600 || !res.status)) return callback('failed loading ' + url, true);\n        if (res && res.status >= 400 && res.status < 500) return callback('failed loading ' + url, false);\n        if (!res && err && err.message && err.message.indexOf('Failed to fetch') > -1) return callback('failed loading ' + url, true);\n        if (err) return callback(err, false);\n        var ret, parseErr;\n\n        try {\n          if (typeof res.data === 'string') {\n            ret = _this2.options.parse(res.data, languages, namespaces);\n          } else {\n            ret = res.data;\n          }\n        } catch (e) {\n          parseErr = 'failed parsing ' + url + ' to json';\n        }\n\n        if (parseErr) return callback(parseErr, false);\n        callback(null, ret);\n      });\n    }\n  }, {\n    key: \"create\",\n    value: function create(languages, namespace, key, fallbackValue) {\n      var _this3 = this;\n\n      if (!this.options.addPath) return;\n      if (typeof languages === 'string') languages = [languages];\n      var payload = this.options.parsePayload(namespace, key, fallbackValue);\n      languages.forEach(function (lng) {\n        var url = _this3.services.interpolator.interpolate(_this3.options.addPath, {\n          lng: lng,\n          ns: namespace\n        });\n\n        _this3.options.request(_this3.options, url, payload, function (data, res) {});\n      });\n    }\n  }, {\n    key: \"reload\",\n    value: function reload() {\n      var _this4 = this;\n\n      var _this$services = this.services,\n          backendConnector = _this$services.backendConnector,\n          languageUtils = _this$services.languageUtils,\n          logger = _this$services.logger;\n      var currentLanguage = backendConnector.language;\n      if (currentLanguage && currentLanguage.toLowerCase() === 'cimode') return;\n      var toLoad = [];\n\n      var append = function append(lng) {\n        var lngs = languageUtils.toResolveHierarchy(lng);\n        lngs.forEach(function (l) {\n          if (toLoad.indexOf(l) < 0) toLoad.push(l);\n        });\n      };\n\n      append(currentLanguage);\n      if (this.allOptions.preload) this.allOptions.preload.forEach(function (l) {\n        return append(l);\n      });\n      toLoad.forEach(function (lng) {\n        _this4.allOptions.ns.forEach(function (ns) {\n          backendConnector.read(lng, ns, 'read', null, null, function (err, data) {\n            if (err) logger.warn(\"loading namespace \".concat(ns, \" for language \").concat(lng, \" failed\"), err);\n            if (!err && data) logger.log(\"loaded namespace \".concat(ns, \" for language \").concat(lng), data);\n            backendConnector.loaded(\"\".concat(lng, \"|\").concat(ns), err, data);\n          });\n        });\n      });\n    }\n  }]);\n\n  return Backend;\n}();\n\nBackend.type = 'backend';\nexport default Backend;","\"use strict\";\n\n// ref: https://github.com/tc39/proposal-global\nvar getGlobal = function () {\n\t// the only reliable means to get the global object is\n\t// `Function('return this')()`\n\t// However, this causes CSP violations in Chrome apps.\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\tthrow new Error('unable to locate global object');\n}\n\nvar global = getGlobal();\n\nmodule.exports = exports = global.fetch;\n\n// Needed for TypeScript and Webpack.\nif (global.fetch) {\n\texports.default = global.fetch.bind(global);\n}\n\nexports.Headers = global.Headers;\nexports.Request = global.Request;\nexports.Response = global.Response;"],"sourceRoot":""}